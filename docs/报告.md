
# Spring Boot + Vue3 AIèŠå¤©ç³»ç»Ÿå¼€å‘æ•™ç¨‹

## ğŸ“š ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

è¿™æ˜¯ä¸€ä¸ª**å‰åç«¯åˆ†ç¦»çš„AIå¯¹è¯ç³»ç»Ÿ**ï¼Œå®ç°äº†ï¼š
- ğŸ‘¤ **ç”¨æˆ·ç®¡ç†**ï¼šæ³¨å†Œã€ç™»å½•ã€ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- ğŸ” **å®‰å…¨è®¤è¯**ï¼šåŸºäºJWTçš„æ— çŠ¶æ€èº«ä»½éªŒè¯
- ğŸ’¬ **AIå¯¹è¯**ï¼šé›†æˆDeepSeek APIçš„æ™ºèƒ½é—®ç­”
- ğŸ“ **å¯¹è¯å†å²**ï¼šå¤šä¼šè¯ç®¡ç†å’Œå†å²è®°å½•

**é€‚åˆäººç¾¤**ï¼šæœ‰Javaå’ŒJavaScriptåŸºç¡€ï¼Œæƒ³å­¦ä¹ ä¼ä¸šçº§å‰åç«¯å¼€å‘çš„åŒå­¦

### 1.2 æŠ€æœ¯æ ˆé€‰å‹ï¼ˆä¸ºä»€ä¹ˆé€‰è¿™äº›æŠ€æœ¯ï¼Ÿï¼‰

#### åç«¯æŠ€æœ¯æ ˆ
| æŠ€æœ¯ | ç‰ˆæœ¬ | é€‰æ‹©ç†ç”± |
|------|------|----------|
| **Spring Boot** | 3.3.4 | ğŸš€ ç®€åŒ–Springé…ç½®ï¼Œå¿«é€Ÿæ­å»ºé¡¹ç›®ï¼Œå†…ç½®Tomcatæ— éœ€éƒ¨ç½² |
| **MyBatis** | 3.0.3 | ğŸ“Š çµæ´»çš„SQLæ§åˆ¶ï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢ï¼Œæ˜“äºç†è§£ |
| **MySQL** | 8.0+ | ğŸ’¾ æˆç†Ÿç¨³å®šçš„å…³ç³»å‹æ•°æ®åº“ï¼Œé€‚åˆç»“æ„åŒ–æ•°æ® |
| **JWT** | 0.12.5 | ğŸ”‘ æ— çŠ¶æ€è®¤è¯ï¼Œé€‚åˆå‰åç«¯åˆ†ç¦»ï¼Œæ˜“äºæ‰©å±• |
| **WebFlux** | å†…ç½® | âš¡ å¼‚æ­¥éé˜»å¡ï¼Œé€‚åˆè°ƒç”¨å¤–éƒ¨AI API |

#### å‰ç«¯æŠ€æœ¯æ ˆ
| æŠ€æœ¯ | ç‰ˆæœ¬ | é€‰æ‹©ç†ç”± |
|------|------|----------|
| **Vue 3** | 3.4.21 | ğŸ¨ ç»„åˆå¼APIæ›´çµæ´»ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼Œç”Ÿæ€å®Œå–„ |
| **Element Plus** | 2.8.4 | ğŸ§© å¼€ç®±å³ç”¨çš„UIç»„ä»¶åº“ï¼Œå¿«é€Ÿæ­å»ºç•Œé¢ |
| **Vite** | 5.2.0 | âš¡ æé€Ÿå†·å¯åŠ¨ï¼Œçƒ­æ›´æ–°å¿«ï¼Œå¼€å‘ä½“éªŒå¥½ |
| **Pinia** | 2.1.7 | ğŸ“¦ Vue 3å®˜æ–¹æ¨èçŠ¶æ€ç®¡ç†ï¼Œæ¯”Vuexç®€æ´ |
| **Axios** | 1.6.8 | ğŸŒ å¼ºå¤§çš„HTTPå®¢æˆ·ç«¯ï¼Œæ‹¦æˆªå™¨æ–¹ä¾¿ç»Ÿä¸€å¤„ç† |

### 1.3 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç”¨æˆ·äº¤äº’ç•Œé¢                                                                           â”‚  
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç™»å½•/æ³¨   â”‚  ç”¨æˆ·ç®¡ç†  â”‚  AIå¯¹è¯  â”‚  å†å²    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                              â”‚
       â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯å±‚     â”‚â—„â”€â”€â”€â”€HTTPâ”€â”€â”€â”€â–º  â”‚   åç«¯å±‚    â”‚
â”‚  Vue 3 SPA  â”‚   JWT Token    â”‚ Spring Boot â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â–¼               â–¼               â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  MySQL  â”‚    â”‚DeepSeek â”‚    â”‚  Redis   â”‚
                â”‚  æ•°æ®åº“  â”‚    â”‚   API   â”‚    â”‚ (å¯é€‰)   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


```
---

## ğŸ› ï¸ äºŒã€ç¯å¢ƒå‡†å¤‡

### 2.1 å¿…éœ€è½¯ä»¶æ¸…å•

#### âœ… å¼€å‘å·¥å…·

å¿…è£…ï¼š
â”œâ”€ JDK 21+         (åç«¯è¿è¡Œç¯å¢ƒ)
â”œâ”€ Node.js 18+     (å‰ç«¯æ„å»ºå·¥å…·)
â”œâ”€ MySQL 9.0+      (æ•°æ®åº“)
â”œâ”€ Git             (ç‰ˆæœ¬æ§åˆ¶)
â””â”€ ä»»é€‰ä¸€ä¸ªIDEï¼š
   â”œâ”€ IntelliJ IDEA (æ¨èï¼ŒJavaå¼€å‘æœ€ä½³)
   â””â”€ VS Code      (è½»é‡çº§ï¼Œå‰åç«¯é€šåƒ)


### 2.2 è¯¦ç»†å®‰è£…æ­¥éª¤

#### ğŸ“¦ JDK å®‰è£…ï¼ˆä»¥JDK 21ä¸ºä¾‹ï¼‰

**Windowså®‰è£…**ï¼š
```bash
# 1. ä¸‹è½½JDK
https://www.oracle.com/java/technologies/downloads/#java21

# 2. å®‰è£…åé…ç½®ç¯å¢ƒå˜é‡
# JAVA_HOME = C:\Program Files\Java\jdk-21
# Path æ·»åŠ  = %JAVA_HOME%\bin

# 3. éªŒè¯å®‰è£…
java -version
# è¾“å‡ºï¼šjava version "21.0.x"
```

**ä¸ºä»€ä¹ˆé€‰JDK 21ï¼Ÿ**
- âœ… Spring Boot 3.x æœ€ä½è¦æ±‚ JDK 17
- âœ… è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰æå‡æ€§èƒ½
- âœ… æ¨¡å¼åŒ¹é…ç­‰æ–°ç‰¹æ€§ç®€åŒ–ä»£ç 

#### ğŸ“¦ Node.js å®‰è£…

```bash
# 1. ä¸‹è½½LTSç‰ˆæœ¬ï¼ˆæ¨è18.xæˆ–20.xï¼‰
https://nodejs.org/

# 2. å®‰è£…åéªŒè¯
node -v    # v18.x.x
npm -v     # 9.x.x

# 3. é…ç½®å›½å†…é•œåƒï¼ˆåŠ é€Ÿä¾èµ–ä¸‹è½½ï¼‰
npm config set registry https://registry.npmmirror.com
```

#### ğŸ“¦ MySQL å®‰è£…ä¸é…ç½®

```bash
# 1. ä¸‹è½½MySQL 8.0+
https://dev.mysql.com/downloads/mysql/

# 2. å®‰è£…åå¯åŠ¨æœåŠ¡
# Windows: æœåŠ¡ç®¡ç†å™¨ä¸­å¯åŠ¨MySQL80
# Mac: brew install mysql && brew services start mysql

# 3. è®¾ç½®rootå¯†ç ï¼ˆåˆæ¬¡å®‰è£…ï¼‰
mysql -u root -p
ALTER USER 'root'@'localhost' IDENTIFIED BY 'your_password';

# 4. åˆ›å»ºé¡¹ç›®æ•°æ®åº“ï¼ˆåç»­ä¼šç”¨SQLè„šæœ¬è‡ªåŠ¨åˆå§‹åŒ–ï¼‰
CREATE DATABASE ai_chat DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

**âš ï¸ å¸¸è§å®‰è£…é—®é¢˜**ï¼š

- **é—®é¢˜1**ï¼šMySQLå¯åŠ¨å¤±è´¥
  - **åŸå› **ï¼š3306ç«¯å£è¢«å ç”¨
  - **è§£å†³**ï¼š`netstat -ano | findstr 3306` æŸ¥çœ‹å ç”¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ç«¯å£
  
- **é—®é¢˜2**ï¼šè¿æ¥è¢«æ‹’ç»
  - **åŸå› **ï¼šé˜²ç«å¢™æˆ–è¿œç¨‹è¿æ¥æœªå¼€å¯
  - **è§£å†³**ï¼šæ£€æŸ¥ `bind-address` é…ç½®ï¼Œå…è®¸è¿œç¨‹è®¿é—®

### 2.3 IDEé…ç½®å»ºè®®

#### IntelliJ IDEAé…ç½®

```yaml
æ¨èæ’ä»¶ï¼š
  - Lombok                # è‡ªåŠ¨ç”Ÿæˆgetter/setter
  - MyBatisX              # MyBatiså¢å¼ºå·¥å…·

é¡¹ç›®é…ç½®ï¼š
  - File Encoding: UTF-8
  - Maven: ä½¿ç”¨è‡ªå¸¦Mavenæˆ–é…ç½®æœ¬åœ°Maven
  - JDK: é¡¹ç›®SDKé€‰æ‹©JDK 21
```

#### VS Codeé…ç½®ï¼ˆå‰ç«¯å¼€å‘ï¼‰

```json
// æ¨èæ‰©å±•
{
  "extensions": [
    "Vue.volar",              // Vue 3å®˜æ–¹æ’ä»¶
    "dbaeumer.vscode-eslint", // ä»£ç è§„èŒƒ
    "esbenp.prettier-vscode"  // ä»£ç æ ¼å¼åŒ–
  ]
}
```

### 2.4 è·å–DeepSeek APIå¯†é’¥

```bash
# 1. æ³¨å†ŒDeepSeekè´¦å·
https://platform.deepseek.com/

# 2. åˆ›å»ºAPI Key
è¿›å…¥"API Keys" -> "åˆ›å»ºæ–°å¯†é’¥" -> å¤åˆ¶ä¿å­˜

# 3. é…ç½®åˆ°é¡¹ç›®ï¼ˆåç»­æ­¥éª¤ï¼‰
backend/src/main/resources/application.yml
  deepseek:
    api-key: sk-xxxxxxxxxxxxxxxx  # æ›¿æ¢ä¸ºä½ çš„å¯†é’¥
```

**ğŸ’° è´¹ç”¨è¯´æ˜**ï¼š
- æ–°ç”¨æˆ·é€šå¸¸æœ‰å…è´¹é¢åº¦
- deepseek-chatæ¨¡å‹ï¼šÂ¥1/ç™¾ä¸‡tokensï¼ˆè¾“å…¥ï¼‰
- å»ºè®®å¼€å‘æ—¶è®¾ç½®ä½¿ç”¨é™é¢

---

## ğŸ—ï¸ ä¸‰ã€é¡¹ç›®æ¶æ„è§£æ

### 3.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æµè§ˆå™¨å®¢æˆ·ç«¯                        â”‚
â”‚                    http://localhost:5173                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTP/JSON + JWT Token
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯åº”ç”¨å±‚ (Vue3)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è·¯ç”±å±‚        â”‚  router/index.js (è·¯ç”±å®ˆå«ï¼Œæƒé™æ§åˆ¶)     â”‚
â”‚  çŠ¶æ€å±‚        â”‚  stores/user.js (Piniaå…¨å±€çŠ¶æ€)          â”‚
â”‚  è§†å›¾å±‚        â”‚  views/Login.vue, Chat.vue...            â”‚
â”‚  APIå°è£…å±‚     â”‚  api/auth.js, chat.js (Axioså®ä¾‹)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Axiosè¯·æ±‚ (baseURL: /api)
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åç«¯åº”ç”¨å±‚ (Spring Boot)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ‹¦æˆªå™¨å±‚      â”‚  JwtAuthenticationFilter (TokenéªŒè¯)     â”‚
â”‚  æ§åˆ¶å™¨å±‚      â”‚  AuthController, ChatController...       â”‚
â”‚  æœåŠ¡å±‚        â”‚  UserService, ChatService (ä¸šåŠ¡é€»è¾‘)     â”‚
â”‚  æ•°æ®è®¿é—®å±‚    â”‚  UserMapper, MessageMapper (MyBatis)     â”‚
â”‚  å®ä½“å±‚        â”‚  User, Message, Conversation (POJO)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                           â”‚
       â”‚ JDBC                                      â”‚ HTTP
       â”‚                                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MySQLæ•°æ®åº“    â”‚                        â”‚ DeepSeek API  â”‚
â”‚  - user        â”‚                        â”‚ /v1/chat/     â”‚
â”‚  - conversationâ”‚                        â”‚  completions  â”‚
â”‚  - message     â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å‰åç«¯åˆ†ç¦»æ¶æ„è¯¦è§£

#### ä¸ºä»€ä¹ˆé‡‡ç”¨å‰åç«¯åˆ†ç¦»ï¼Ÿ

**ä¼ ç»Ÿæ¶æ„ï¼ˆJSP/Thymeleafï¼‰**ï¼š
```
æµè§ˆå™¨ â†’ Tomcat â†’ Controller â†’ æ¸²æŸ“HTML â†’ è¿”å›å®Œæ•´é¡µé¢
âŒ å‰åç«¯è€¦åˆï¼Œéš¾ä»¥å¹¶è¡Œå¼€å‘
âŒ é¡µé¢åˆ·æ–°ä½“éªŒå·®
âŒ ç§»åŠ¨ç«¯é€‚é…å›°éš¾
```

**å‰åç«¯åˆ†ç¦»æ¶æ„**ï¼š
```
æµè§ˆå™¨ â†’ Nginx â†’ Vue SPA (ä»…é¦–æ¬¡åŠ è½½HTML)
         â†“
æµè§ˆå™¨ â†” APIæ¥å£ â†” Spring Boot (è¿”å›JSONæ•°æ®)
âœ… å‰åç«¯ç‹¬ç«‹å¼€å‘éƒ¨ç½²
âœ… SPAå•é¡µåº”ç”¨æµç•…
âœ… åŒä¸€å¥—APIæ”¯æŒWeb/App
```

### 3.3 ç›®å½•ç»“æ„è¯¦è§£

#### åç«¯ç›®å½•ç»“æ„
```
backend/
â”œâ”€â”€ pom.xml                          # Mavenä¾èµ–é…ç½®
â”œâ”€â”€ src/main/
â”‚   â”œâ”€â”€ java/com/example/aichat/
â”‚   â”‚   â”œâ”€â”€ AiChatApplication.java   # ğŸš€ Spring Bootå¯åŠ¨ç±»
â”‚   â”‚   â”œâ”€â”€ config/                  # ğŸ“‹ é…ç½®ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ CorsConfig.java      #   è·¨åŸŸé…ç½®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ FilterConfig.java    #   è¿‡æ»¤å™¨æ³¨å†Œ
â”‚   â”‚   â”‚   â””â”€â”€ WebClientConfig.java #   WebClienté…ç½®ï¼ˆè°ƒç”¨AI APIï¼‰
â”‚   â”‚   â”œâ”€â”€ controller/              # ğŸ® æ§åˆ¶å™¨å±‚ï¼ˆæ¥æ”¶HTTPè¯·æ±‚ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthController.java  #   è®¤è¯æ¥å£ï¼šç™»å½•/æ³¨å†Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatController.java  #   èŠå¤©æ¥å£ï¼šå¯¹è¯/å†å²
â”‚   â”‚   â”‚   â””â”€â”€ UserController.java  #   ç”¨æˆ·æ¥å£ï¼šCRUD
â”‚   â”‚   â”œâ”€â”€ service/                 # ğŸ’¼ æœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ impl/                #   å®ç°ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ UserService.java     #   ç”¨æˆ·ä¸šåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ ChatService.java     #   AIå¯¹è¯ä¸šåŠ¡
â”‚   â”‚   â”œâ”€â”€ mapper/                  # ğŸ—„ï¸ æ•°æ®è®¿é—®å±‚ï¼ˆMyBatisæ¥å£ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ UserMapper.java      
â”‚   â”‚   â”‚   â”œâ”€â”€ ConversationMapper.java
â”‚   â”‚   â”‚   â””â”€â”€ MessageMapper.java
â”‚   â”‚   â”œâ”€â”€ entity/                  # ğŸ“¦ å®ä½“ç±»ï¼ˆå¯¹åº”æ•°æ®åº“è¡¨ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Conversation.java
â”‚   â”‚   â”‚   â””â”€â”€ Message.java
â”‚   â”‚   â”œâ”€â”€ dto/                     # ğŸ“® æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚   â”œâ”€â”€ ApiResponse.java     #   ç»Ÿä¸€å“åº”æ ¼å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthRequest.java     #   ç™»å½•è¯·æ±‚
â”‚   â”‚   â”‚   â””â”€â”€ ChatMessageRequest.java
â”‚   â”‚   â”œâ”€â”€ filter/                  # ğŸ” è¿‡æ»¤å™¨
â”‚   â”‚   â”‚   â””â”€â”€ JwtAuthenticationFilter.java  # JWTéªŒè¯
â”‚   â”‚   â”œâ”€â”€ util/                    # ğŸ”§ å·¥å…·ç±»
â”‚   â”‚   â”‚   â””â”€â”€ JwtUtil.java         #   JWTç”Ÿæˆ/è§£æ
â”‚   â”‚   â””â”€â”€ exception/               # âš ï¸ å¼‚å¸¸å¤„ç†
â”‚   â”‚       â””â”€â”€ GlobalExceptionHandler.java
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ application.yml          # ğŸ“ æ ¸å¿ƒé…ç½®æ–‡ä»¶
â”‚       â”œâ”€â”€ schema.sql               # ğŸ’¾ æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚       â””â”€â”€ mapper/                  # XMLæ˜ å°„æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ target/                          # ğŸ“¦ ç¼–è¯‘è¾“å‡ºç›®å½•
```

**å…³é”®æ–‡ä»¶è¯´æ˜**ï¼š

1. **application.yml** - ä¸€ç«™å¼é…ç½®
```yaml
# ä¸ºä»€ä¹ˆç”¨YAMLè€Œä¸æ˜¯propertiesï¼Ÿ
# âœ… å±‚çº§ç»“æ„æ¸…æ™°
# âœ… æ”¯æŒå¤æ‚æ•°æ®ç»“æ„
# âœ… é¿å…é‡å¤å‰ç¼€

server:
  port: 8080              # æœåŠ¡ç«¯å£

spring:
  datasource:            # æ•°æ®åº“é…ç½®
    url: jdbc:mysql://localhost:3306/ai_chat
    username: root
    password: your_password
    
mybatis:
  configuration:
    map-underscore-to-camel-case: true  # ä¸‹åˆ’çº¿è½¬é©¼å³°

jwt:
  secret: change-this-secret-to-32-bytes-key-123
  expiration-minutes: 120               # Tokenæœ‰æ•ˆæœŸ2å°æ—¶
```

2. **schema.sql** - æ•°æ®åº“å»ºè¡¨è„šæœ¬
```sql
-- ä¸ºä»€ä¹ˆç”¨SQLè„šæœ¬åˆå§‹åŒ–ï¼Ÿ
-- âœ… ç‰ˆæœ¬å¯æ§ï¼Œä¾¿äºè¿½è¸ªå˜æ›´
-- âœ… å›¢é˜Ÿåä½œç»Ÿä¸€ç¯å¢ƒ
-- âœ… å¿«é€Ÿæ­å»ºæµ‹è¯•ç¯å¢ƒ

CREATE TABLE user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(64) NOT NULL UNIQUE,  -- å”¯ä¸€ç´¢å¼•
    password VARCHAR(255) NOT NULL,         -- BCryptåŠ å¯†
    ...
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;   -- InnoDBæ”¯æŒäº‹åŠ¡
```

#### å‰ç«¯ç›®å½•ç»“æ„
```
frontend/
â”œâ”€â”€ package.json                     # npmä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.js                   # Viteæ„å»ºé…ç½®
â”œâ”€â”€ index.html                       # å…¥å£HTML
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js                      # ğŸš€ åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ App.vue                      # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ router/                      # ğŸ§­ è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.js                 #   è·¯ç”±å®šä¹‰ + å¯¼èˆªå®ˆå«
â”‚   â”œâ”€â”€ stores/                      # ğŸ“¦ çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ user.js                  #   ç”¨æˆ·ä¿¡æ¯Store
â”‚   â”œâ”€â”€ views/                       # ğŸ“„ é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Login.vue                #   ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ Register.vue             #   æ³¨å†Œé¡µ
â”‚   â”‚   â”œâ”€â”€ Chat.vue                 #   èŠå¤©é¡µ
â”‚   â”‚   â””â”€â”€ UserManagement.vue       #   ç”¨æˆ·ç®¡ç†é¡µ
â”‚   â”œâ”€â”€ api/                         # ğŸŒ APIå°è£…
â”‚   â”‚   â”œâ”€â”€ auth.js                  #   è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ chat.js                  #   èŠå¤©ç›¸å…³
â”‚   â”‚   â””â”€â”€ user.js                  #   ç”¨æˆ·ç›¸å…³
â”‚   â””â”€â”€ utils/                       # ğŸ”§ å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ axios.js                 #   Axioså®ä¾‹é…ç½®
â””â”€â”€ dist/                            # ğŸ“¦ æ‰“åŒ…è¾“å‡ºç›®å½•ï¼ˆnpm run buildï¼‰
```

### 3.4 æ•°æ®æµè½¬è¿‡ç¨‹ï¼ˆä»¥ç™»å½•ä¸ºä¾‹ï¼‰

```
ç”¨æˆ·æ“ä½œï¼šè¾“å…¥ç”¨æˆ·åå¯†ç  â†’ ç‚¹å‡»ç™»å½•æŒ‰é’®
    â†“
ã€å‰ç«¯ã€‘Login.vue
    â†“ è°ƒç”¨API
ã€å‰ç«¯ã€‘api/auth.js â†’ login({username, password})
    â†“ Axiosæ‹¦æˆªå™¨æ·»åŠ è¯·æ±‚å¤´
ã€å‰ç«¯ã€‘utils/axios.js â†’ POST /api/auth/login
    â†“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” HTTPè¯·æ±‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    â†“
ã€åç«¯ã€‘JwtAuthenticationFilter â†’ ç™»å½•æ¥å£åœ¨ç™½åå•ï¼Œæ”¾è¡Œ
    â†“
ã€åç«¯ã€‘AuthController.login() â†’ æ¥æ”¶è¯·æ±‚
    â†“ è°ƒç”¨æœåŠ¡
ã€åç«¯ã€‘UserService.login()
    â”œâ”€ UserMapper.findByUsername() â†’ æŸ¥è¯¢æ•°æ®åº“
    â”œâ”€ BCryptPasswordEncoder.matches() â†’ éªŒè¯å¯†ç 
    â””â”€ JwtUtil.generateToken() â†’ ç”ŸæˆToken
    â†“ è¿”å›
ã€åç«¯ã€‘ApiResponse<TokenDTO> â†’ åŒ…è£…å“åº”
    â†“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” HTTPå“åº” â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    â†“
ã€å‰ç«¯ã€‘Axioså“åº”æ‹¦æˆªå™¨ â†’ æ£€æŸ¥çŠ¶æ€ç 
    â†“ æˆåŠŸ
ã€å‰ç«¯ã€‘Login.vue
    â”œâ”€ localStorage.setItem('token', response.token)
    â”œâ”€ userStore.setUser(response.user)
    â””â”€ router.push('/chat') â†’ è·³è½¬èŠå¤©é¡µ
```

**å…³é”®ç‚¹è§£æ**ï¼š

1. **ä¸ºä»€ä¹ˆå‰ç«¯å­˜å‚¨Tokenåˆ°localStorageï¼Ÿ**
   - âœ… åˆ·æ–°é¡µé¢ä¸ä¸¢å¤±ç™»å½•çŠ¶æ€
   - âœ… è·¨Tabé¡µé¢å…±äº«
   - âš ï¸ æ³¨æ„ï¼šXSSæ”»å‡»é£é™©ï¼ˆéœ€å‰ç«¯åšè¾“å…¥è¿‡æ»¤ï¼‰

2. **ä¸ºä»€ä¹ˆç”¨BCryptåŠ å¯†å¯†ç ï¼Ÿ**
   - âœ… è‡ªåŠ¨åŠ ç›ï¼ˆsaltï¼‰ï¼ŒåŒä¸€å¯†ç æ¯æ¬¡åŠ å¯†ç»“æœä¸åŒ
   - âœ… æ…¢å“ˆå¸Œç®—æ³•ï¼Œé˜²æ­¢æš´åŠ›ç ´è§£
   - âŒ ä¸å¯é€†ï¼Œåªèƒ½éªŒè¯ä¸èƒ½è§£å¯†

3. **ä¸ºä»€ä¹ˆJWTæ— çŠ¶æ€ï¼Ÿ**
   - âœ… æœåŠ¡ç«¯ä¸å­˜å‚¨Sessionï¼Œæ˜“äºæ°´å¹³æ‰©å±•
   - âœ… TokenåŒ…å«ç”¨æˆ·ä¿¡æ¯ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢
   - âš ï¸ æ— æ³•ä¸»åŠ¨å¤±æ•ˆï¼ˆå¯é…åˆRedisé»‘åå•ï¼‰
```

---

**å‰åŠéƒ¨åˆ†å®Œæˆï¼ŒåŒ…å«**ï¼š
- âœ… é¡¹ç›®æ¦‚è¿°ï¼ˆæŠ€æœ¯æ ˆé€‰å‹ç†ç”±ï¼‰
- âœ… ç¯å¢ƒå‡†å¤‡ï¼ˆè¯¦ç»†å®‰è£…æ­¥éª¤ï¼‰
- âœ… é¡¹ç›®æ¶æ„è§£æï¼ˆç›®å½•ç»“æ„+æ•°æ®æµç¨‹ï¼‰

ç»§ç»­è¾“å‡ºååŠéƒ¨åˆ†å—ï¼Ÿ(æ ¸å¿ƒåŠŸèƒ½æ¨¡å—è¯¦è§£ã€å¼€å‘å®æˆ˜æŒ‡å—ã€å¸¸è§é—®é¢˜æ’æŸ¥)---

**å‰åŠéƒ¨åˆ†å®Œæˆï¼ŒåŒ…å«**ï¼š
- âœ… é¡¹ç›®æ¦‚è¿°ï¼ˆæŠ€æœ¯æ ˆé€‰å‹ç†ç”±ï¼‰
- âœ… ç¯å¢ƒå‡†å¤‡ï¼ˆè¯¦ç»†å®‰è£…æ­¥éª¤ï¼‰
- âœ… é¡¹ç›®æ¶æ„è§£æï¼ˆç›®å½•ç»“æ„+æ•°æ®æµç¨‹ï¼‰

ç»§ç»­è¾“å‡ºååŠéƒ¨åˆ†å—ï¼Ÿ(æ ¸å¿ƒåŠŸèƒ½æ¨¡å—è¯¦è§£ã€å¼€å‘å®æˆ˜æŒ‡å—ã€å¸¸è§é—®é¢˜æ’æŸ¥)
è¯»å– [](file:///d%3A/studio/springboot-ai-chat/backend/src/main/java/com/example/aichat/filter/JwtAuthenticationFilter.java)

è¯»å– [](file:///d%3A/studio/springboot-ai-chat/backend/src/main/java/com/example/aichat/controller/AuthController.java)

è¯»å– [](file:///d%3A/studio/springboot-ai-chat/backend/src/main/java/com/example/aichat/service/impl/ChatServiceImpl.java#1-1)ï¼Œè¡Œ 1 åˆ° 100

è¯»å– [](file:///d%3A/studio/springboot-ai-chat/frontend/src/utils/axios.js)

è¯»å– [](file:///d%3A/studio/springboot-ai-chat/frontend/src/views/Chat.vue#1-1)ï¼Œè¡Œ 1 åˆ° 100

ç»§ç»­è¾“å‡ºååŠéƒ¨åˆ†ï¼š

```markdown
## ğŸ”§ å››ã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—è¯¦è§£

### 4.1 JWTè®¤è¯æœºåˆ¶å®ç°

#### ğŸ’¡ JWTå·¥ä½œåŸç†

```
ç™»å½•æµç¨‹ï¼š
ç”¨æˆ·ç™»å½• â†’ éªŒè¯å¯†ç  â†’ ç”ŸæˆJWT â†’ è¿”å›å®¢æˆ·ç«¯ â†’ å­˜å‚¨localStorage

è®¿é—®å—ä¿æŠ¤æ¥å£ï¼š
å®¢æˆ·ç«¯è¯·æ±‚ â†’ æºå¸¦JWT â†’ è¿‡æ»¤å™¨éªŒè¯ â†’ è§£æç”¨æˆ·ä¿¡æ¯ â†’ æ”¾è¡Œ/æ‹’ç»
```

#### ğŸ“ æ ¸å¿ƒä»£ç è¯¦è§£

**1. JwtUtil - Tokenç”Ÿæˆä¸è§£æ**

```java
@Component
public class JwtUtil {
    private final SecretKey secretKey;
    private final long expirationMinutes;

    // æ„é€ å‡½æ•°ï¼šä»é…ç½®æ–‡ä»¶è¯»å–å¯†é’¥å’Œæœ‰æ•ˆæœŸ
    public JwtUtil(@Value("${jwt.secret}") String secret,
                   @Value("${jwt.expiration-minutes}") long expirationMinutes) {
        // âš ï¸ é‡è¦ï¼šå¯†é’¥é•¿åº¦å¿…é¡»>=32å­—èŠ‚ï¼Œç”¨äºHS256ç®—æ³•
        this.secretKey = Keys.hmacShaKeyFor(secret.getBytes(StandardCharsets.UTF_8));
        this.expirationMinutes = expirationMinutes;
    }

    // ç”ŸæˆToken
    public String generateToken(Long userId, String username) {
        Instant now = Instant.now();
        return Jwts.builder()
                .subject(username)                    // ä¸»ä½“ï¼šç”¨æˆ·å
                .issuedAt(Date.from(now))             // ç­¾å‘æ—¶é—´
                .expiration(Date.from(now.plus(       // è¿‡æœŸæ—¶é—´
                    expirationMinutes, ChronoUnit.MINUTES)))
                .claims(Map.of("userId", userId))     // è‡ªå®šä¹‰å£°æ˜
                .signWith(secretKey)                  // ç­¾åç®—æ³•ï¼šHS256
                .compact();                           // ç”Ÿæˆç´§å‡‘æ ¼å¼
    }

    // è§£æToken
    public Claims parseClaims(String token) {
        return Jwts.parser()
                .verifyWith(secretKey)                // éªŒè¯ç­¾å
                .build()
                .parseSignedClaims(token)             // è§£æ
                .getPayload();                        // è·å–è´Ÿè½½
    }
}
```

**å…³é”®ç‚¹è§£æ**ï¼š
- **ä¸ºä»€ä¹ˆç”¨HS256è€Œä¸æ˜¯RS256ï¼Ÿ**
  - HS256ï¼šå¯¹ç§°åŠ å¯†ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆå•ä½“åº”ç”¨
  - RS256ï¼šéå¯¹ç§°åŠ å¯†ï¼Œæ›´å®‰å…¨ï¼Œé€‚åˆå¾®æœåŠ¡ï¼ˆå…¬é’¥éªŒè¯ï¼‰

- **ClaimsåŒ…å«ä»€ä¹ˆï¼Ÿ**
  ```json
  {
    "sub": "admin",           // subject ç”¨æˆ·å
    "iat": 1705000000,        // issued at ç­¾å‘æ—¶é—´
    "exp": 1705007200,        // expiration è¿‡æœŸæ—¶é—´
    "userId": 1               // è‡ªå®šä¹‰å­—æ®µ
  }
  ```

**2. JwtAuthenticationFilter - è¯·æ±‚æ‹¦æˆªéªŒè¯**

```java
@Component
@RequiredArgsConstructor
public class JwtAuthenticationFilter extends OncePerRequestFilter {

    private final JwtUtil jwtUtil;
    
    // ç™½åå•ï¼šæ— éœ€éªŒè¯çš„æ¥å£
    private final List<String> whitelist = List.of(
            "/api/auth/login",     // ç™»å½•æ¥å£
            "/api/auth/register",  // æ³¨å†Œæ¥å£
            "/actuator/**"         // ç›‘æ§ç«¯ç‚¹ï¼ˆç”Ÿäº§éœ€å…³é—­ï¼‰
    );

    // åˆ¤æ–­æ˜¯å¦éœ€è¦è¿‡æ»¤
    @Override
    protected boolean shouldNotFilter(HttpServletRequest request) {
        String path = request.getRequestURI();
        // OPTIONSè¯·æ±‚ï¼ˆCORSé¢„æ£€ï¼‰ç›´æ¥æ”¾è¡Œ
        if ("OPTIONS".equalsIgnoreCase(request.getMethod())) {
            return true;
        }
        // åŒ¹é…ç™½åå•
        return whitelist.stream().anyMatch(pattern -> 
            pathMatcher.match(pattern, path));
    }

    // æ ¸å¿ƒè¿‡æ»¤é€»è¾‘
    @Override
    protected void doFilterInternal(HttpServletRequest request, 
                                    HttpServletResponse response, 
                                    FilterChain filterChain)
            throws ServletException, IOException {
        // 1. ä»Headeræå–Token
        String auth = request.getHeader(HttpHeaders.AUTHORIZATION);
        if (auth == null || !auth.startsWith("Bearer ")) {
            unauthorized(response, "Missing token");
            return;
        }
        
        String token = auth.substring(7);  // å»é™¤"Bearer "å‰ç¼€
        
        try {
            // 2. éªŒè¯å¹¶è§£æToken
            Claims claims = jwtUtil.parseClaims(token);
            
            // 3. å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥Requestï¼Œä¾›Controllerä½¿ç”¨
            request.setAttribute("userId", 
                Long.valueOf(claims.get("userId").toString()));
            request.setAttribute("username", claims.getSubject());
            
            // 4. æ”¾è¡Œè¯·æ±‚
            filterChain.doFilter(request, response);
        } catch (Exception ex) {
            // Tokenè¿‡æœŸæˆ–æ— æ•ˆ
            unauthorized(response, "Invalid or expired token");
        }
    }

    // è¿”å›401æœªæˆæƒå“åº”
    private void unauthorized(HttpServletResponse response, String message) 
            throws IOException {
        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
        response.setContentType(MediaType.APPLICATION_JSON_VALUE);
        String body = String.format(
            "{\"code\":401,\"message\":\"%s\",\"data\":null}", message);
        response.getOutputStream().write(
            body.getBytes(StandardCharsets.UTF_8));
    }
}
```

**å·¥ä½œæµç¨‹å›¾**ï¼š
```
HTTPè¯·æ±‚ â†’ Filteræ‹¦æˆª
    â”‚
    â”œâ”€ ç™½åå•ï¼Ÿâ”€â”€æ˜¯â†’ æ”¾è¡Œ
    â”‚       â”‚
    â”‚       å¦
    â”‚       â†“
    â”œâ”€ æœ‰Tokenï¼Ÿâ”€â”€å¦â†’ è¿”å›401
    â”‚       â”‚
    â”‚       æ˜¯
    â”‚       â†“
    â”œâ”€ Tokenæœ‰æ•ˆï¼Ÿâ”€â”€å¦â†’ è¿”å›401
    â”‚       â”‚
    â”‚       æ˜¯
    â”‚       â†“
    â””â”€ è§£æç”¨æˆ·ä¿¡æ¯ â†’ æ”¾è¡Œ â†’ Controller
```

---

### 4.2 ç”¨æˆ·ç®¡ç†CRUDå®ç°

#### ğŸ“Š æ•°æ®åº“è¡¨è®¾è®¡

```sql
CREATE TABLE user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(64) NOT NULL UNIQUE,    -- å”¯ä¸€ç´¢å¼•ï¼Œç”¨äºç™»å½•
    password VARCHAR(255) NOT NULL,          -- BCryptåŠ å¯†ï¼ˆ60å­—ç¬¦ï¼‰
    email VARCHAR(128),
    nickname VARCHAR(128),
    avatar VARCHAR(255),
    status TINYINT DEFAULT 1,                -- 1å¯ç”¨ 0ç¦ç”¨
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_user_username(username)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

**è®¾è®¡è¦ç‚¹**ï¼š
- âœ… `username` å”¯ä¸€ç´¢å¼•ï¼šå¿«é€Ÿç™»å½•æŸ¥è¯¢
- âœ… `password` å­˜å‚¨BCryptå“ˆå¸Œï¼ˆé•¿åº¦255è¶³å¤Ÿï¼‰
- âœ… `ENGINE=InnoDB`ï¼šæ”¯æŒäº‹åŠ¡å’Œå¤–é”®
- âœ… `utf8mb4`ï¼šæ”¯æŒemojiè¡¨æƒ…

#### ğŸ’¼ Serviceå±‚ä¸šåŠ¡é€»è¾‘

```java
@Service
@RequiredArgsConstructor
public class UserServiceImpl implements UserService {

    private final UserMapper userMapper;
    private final JwtUtil jwtUtil;
    // BCryptåŠ å¯†å™¨ï¼Œè‡ªåŠ¨åŠ ç›
    private final PasswordEncoder passwordEncoder = 
        new BCryptPasswordEncoder();

    // ç”¨æˆ·æ³¨å†Œ
    @Override
    public User register(RegisterRequest request) {
        // 1. æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
        if (userMapper.findByUsername(request.getUsername()) != null) {
            throw new ApiException(400, "ç”¨æˆ·åå·²å­˜åœ¨");
        }
        
        // 2. åˆ›å»ºç”¨æˆ·å®ä½“
        User user = new User();
        user.setUsername(request.getUsername());
        // 3. BCryptåŠ å¯†å¯†ç ï¼ˆè‡ªåŠ¨åŠ ç›ï¼Œæ¯æ¬¡ç»“æœä¸åŒï¼‰
        user.setPassword(passwordEncoder.encode(request.getPassword()));
        user.setEmail(request.getEmail());
        user.setNickname(request.getNickname());
        user.setStatus(1);
        
        // 4. æ’å…¥æ•°æ®åº“
        userMapper.insert(user);
        
        // 5. è¿”å›æ—¶éšè—å¯†ç 
        user.setPassword(null);
        return user;
    }

    // ç”¨æˆ·ç™»å½•
    @Override
    public Map<String, Object> login(AuthRequest request) {
        // 1. æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢
        User user = userMapper.findByUsername(request.getUsername());
        if (user == null) {
            throw new ApiException(401, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
        }
        
        // 2. éªŒè¯å¯†ç ï¼ˆBCryptè‡ªåŠ¨å¤„ç†ç›å€¼ï¼‰
        if (!passwordEncoder.matches(request.getPassword(), user.getPassword())) {
            throw new ApiException(401, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
        }
        
        // 3. æ£€æŸ¥è´¦å·çŠ¶æ€
        if (user.getStatus() == 0) {
            throw new ApiException(403, "è´¦å·å·²è¢«ç¦ç”¨");
        }
        
        // 4. ç”ŸæˆJWT Token
        String token = jwtUtil.generateToken(user.getId(), user.getUsername());
        
        // 5. è¿”å›Tokenå’Œç”¨æˆ·ä¿¡æ¯
        user.setPassword(null);  // éšè—å¯†ç 
        return Map.of(
            "token", token,
            "user", user
        );
    }
}
```

**BCryptåŠ å¯†æ¼”ç¤º**ï¼š
```java
// åŸå§‹å¯†ç 
String rawPassword = "admin123";

// ç¬¬ä¸€æ¬¡åŠ å¯†
String hash1 = "$2a$10$Qq2rWjJDQF9JEAH...khJxLtAmS060";

// ç¬¬äºŒæ¬¡åŠ å¯†ï¼ˆç»“æœä¸åŒï¼ï¼‰
String hash2 = "$2a$10$AbCdEfGhIjKlMn...XyZ1234567890";

// ä½†éªŒè¯éƒ½èƒ½é€šè¿‡
passwordEncoder.matches(rawPassword, hash1);  // true
passwordEncoder.matches(rawPassword, hash2);  // true
```

---

### 4.3 AIå¯¹è¯æ ¸å¿ƒå®ç°

#### ğŸ¤– DeepSeek APIé›†æˆ

**1. WebClienté…ç½®**

```java
@Configuration
public class WebClientConfig {

    @Bean
    public WebClient deepSeekClient(
            @Value("${deepseek.base-url}") String baseUrl,
            @Value("${deepseek.api-key}") String apiKey) {
        return WebClient.builder()
                .baseUrl(baseUrl)                          // https://api.deepseek.com
                .defaultHeader(HttpHeaders.AUTHORIZATION, 
                    "Bearer " + apiKey)                     // APIå¯†é’¥
                .defaultHeader(HttpHeaders.CONTENT_TYPE, 
                    MediaType.APPLICATION_JSON_VALUE)
                .codecs(configurer -> configurer
                    .defaultCodecs()
                    .maxInMemorySize(10 * 1024 * 1024))   // 10MBç¼“å†²åŒº
                .build();
    }
}
```

**ä¸ºä»€ä¹ˆç”¨WebClientè€Œä¸æ˜¯RestTemplateï¼Ÿ**
- âœ… WebClientï¼šéé˜»å¡ï¼Œæ”¯æŒå“åº”å¼ç¼–ç¨‹ï¼ˆReactiveï¼‰
- âœ… é€‚åˆè°ƒç”¨æ…¢é€Ÿå¤–éƒ¨APIï¼ˆAIå“åº”æ—¶é—´é•¿ï¼‰
- âŒ RestTemplateï¼šé˜»å¡å¼ï¼ŒSpring 5åå·²è¿‡æ—¶

**2. è°ƒç”¨AI API**

```java
@Service
@RequiredArgsConstructor
public class ChatServiceImpl implements ChatService {

    private final WebClient deepSeekClient;
    private final MessageMapper messageMapper;

    @Override
    public Message sendMessage(Long userId, Long conversationId, 
                               ChatMessageRequest request) {
        // 1. ä¿å­˜ç”¨æˆ·æ¶ˆæ¯
        Message userMsg = new Message();
        userMsg.setConversationId(conversationId);
        userMsg.setRole("user");
        userMsg.setContent(request.getContent());
        messageMapper.insert(userMsg);

        // 2. è°ƒç”¨DeepSeek API
        String aiContent = callDeepSeek(request.getContent());

        // 3. ä¿å­˜AIå›å¤
        Message aiMsg = new Message();
        aiMsg.setConversationId(conversationId);
        aiMsg.setRole("assistant");
        aiMsg.setContent(aiContent);
        messageMapper.insert(aiMsg);
        
        return aiMsg;
    }

    private String callDeepSeek(String prompt) {
        try {
            // æ„å»ºè¯·æ±‚ä½“
            Map<String, Object> requestBody = Map.of(
                "model", "deepseek-chat",           // æ¨¡å‹åç§°
                "temperature", 0.7,                 // åˆ›é€ æ€§ï¼ˆ0-2ï¼‰
                "messages", List.of(Map.of(
                    "role", "user",
                    "content", prompt
                ))
            );

            // å‘é€POSTè¯·æ±‚
            Map<String, Object> response = deepSeekClient.post()
                    .uri("/v1/chat/completions")
                    .bodyValue(requestBody)
                    .retrieve()
                    .bodyToMono(Map.class)          // å¼‚æ­¥è½¬åŒæ­¥
                    .block();                       // é˜»å¡ç­‰å¾…ç»“æœ

            // è§£æå“åº”
            List<?> choices = (List<?>) response.get("choices");
            Map<?, ?> choice = (Map<?, ?>) choices.get(0);
            Map<?, ?> message = (Map<?, ?>) choice.get("message");
            return (String) message.get("content");
            
        } catch (Exception ex) {
            throw new ApiException(502, "AIè°ƒç”¨å¤±è´¥: " + ex.getMessage());
        }
    }
}
```

**è¯·æ±‚/å“åº”æ ¼å¼**ï¼š
```json
// è¯·æ±‚
{
  "model": "deepseek-chat",
  "temperature": 0.7,
  "messages": [
    {"role": "user", "content": "ä»€ä¹ˆæ˜¯Spring Bootï¼Ÿ"}
  ]
}

// å“åº”
{
  "id": "chatcmpl-xxx",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Spring Bootæ˜¯ä¸€ä¸ªåŸºäºSpringæ¡†æ¶çš„..."
      }
    }
  ],
  "usage": {
    "prompt_tokens": 15,
    "completion_tokens": 120,
    "total_tokens": 135
  }
}
```

---

### 4.4 å‰ç«¯æ ¸å¿ƒå®ç°

#### ğŸ” Axiosè¯·æ±‚å°è£…

```javascript
// utils/axios.js
import axios from 'axios';
import { useUserStore } from '../stores/user';
import router from '../router';
import { ElMessage } from 'element-plus';

const instance = axios.create({
  baseURL: '/api',       // Viteä»£ç†åˆ°åç«¯
  timeout: 15000,
  headers: {
    'Content-Type': 'application/json'
  }
});

// è¯·æ±‚æ‹¦æˆªå™¨ï¼šæ·»åŠ Token
instance.interceptors.request.use((config) => {
  const store = useUserStore();
  if (store.token) {
    // æ·»åŠ Authorizationå¤´
    config.headers.Authorization = `Bearer ${store.token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†
instance.interceptors.response.use(
  (response) => response.data,  // ç›´æ¥è¿”å›data
  (error) => {
    if (error.response?.status === 401) {
      // Tokenè¿‡æœŸï¼Œæ¸…é™¤ç™»å½•çŠ¶æ€
      const store = useUserStore();
      store.logout();
      router.push('/login');
      ElMessage.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');
    } else {
      // å…¶ä»–é”™è¯¯æç¤º
      ElMessage.error(
        error.response?.data?.message || error.message
      );
    }
    return Promise.reject(error);
  }
);

export default instance;
```

**æ‹¦æˆªå™¨å·¥ä½œæµç¨‹**ï¼š
```
å‘é€è¯·æ±‚
    â†“
è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆæ·»åŠ Tokenï¼‰
    â†“
HTTPè¯·æ±‚
    â†“
HTTPå“åº”
    â†“
å“åº”æ‹¦æˆªå™¨
    â”œâ”€ 2xx â†’ è¿”å›data
    â”œâ”€ 401 â†’ è·³è½¬ç™»å½•
    â””â”€ å…¶ä»– â†’ é”™è¯¯æç¤º
```

#### ğŸ’¬ Chatç»„ä»¶å®ç°

```vue
<template>
  <el-container class="chat-page">
    <!-- å·¦ä¾§å¯¹è¯åˆ—è¡¨ -->
    <el-aside width="260px" class="sidebar">
      <div class="sidebar-header">
        <div class="logo">AI Chat</div>
        <el-button type="primary" size="small" @click="newConversation">
          æ–°å»ºå¯¹è¯
        </el-button>
      </div>
      <el-menu :default-active="String(activeId)">
        <el-menu-item 
          v-for="c in conversations" 
          :key="c.id" 
          @click="switchConversation(c.id)">
          {{ c.title }}
        </el-menu-item>
      </el-menu>
    </el-aside>

    <!-- å³ä¾§èŠå¤©åŒºåŸŸ -->
    <el-container>
      <!-- æ¶ˆæ¯åˆ—è¡¨ -->
      <el-main class="chat-body">
        <el-scrollbar ref="scrollRef" class="messages">
          <div v-for="m in messages" :key="m.id" :class="['msg', m.role]">
            <div class="bubble">
              <div class="role">{{ m.role === 'user' ? 'æˆ‘' : 'AI' }}</div>
              <div class="content">{{ m.content }}</div>
            </div>
          </div>
        </el-scrollbar>
      </el-main>

      <!-- è¾“å…¥æ¡† -->
      <el-footer class="chat-input">
        <el-input
          v-model="input"
          type="textarea"
          :rows="3"
          placeholder="Enterå‘é€ï¼ŒShift+Enteræ¢è¡Œ"
          @keyup.enter.exact.prevent="onSend"
        />
        <el-button 
          type="primary" 
          :loading="sending" 
          @click="onSend">
          å‘é€
        </el-button>
      </el-footer>
    </el-container>
  </el-container>
</template>

<script setup>
import { ref, onMounted, nextTick } from 'vue';
import { sendMessage, listMessages } from '../api/chat';

const messages = ref([]);
const input = ref('');
const sending = ref(false);
const scrollRef = ref();

// å‘é€æ¶ˆæ¯
const onSend = async () => {
  if (!input.value.trim() || sending.value) return;
  
  const content = input.value;
  input.value = '';  // ç«‹å³æ¸…ç©ºè¾“å…¥æ¡†
  sending.value = true;

  try {
    // 1. ä¹è§‚æ›´æ–°ï¼šç«‹å³æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯
    messages.value.push({
      id: Date.now(),
      role: 'user',
      content: content
    });
    await scrollToBottom();

    // 2. å‘é€åˆ°åç«¯
    const res = await sendMessage(activeId.value, { content });
    
    // 3. æ·»åŠ AIå›å¤
    messages.value.push(res.data);
    await scrollToBottom();
    
  } catch (error) {
    // å¤±è´¥æ—¶ç§»é™¤ä¹è§‚æ›´æ–°çš„æ¶ˆæ¯
    messages.value.pop();
  } finally {
    sending.value = false;
  }
};

// è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
const scrollToBottom = async () => {
  await nextTick();
  const scrollbar = scrollRef.value;
  if (scrollbar) {
    scrollbar.setScrollTop(999999);
  }
};

onMounted(() => {
  loadMessages();
});
</script>

<style scoped>
/* ç”¨æˆ·æ¶ˆæ¯é å³ï¼Œè“è‰²æ°”æ³¡ */
.msg.user {
  justify-content: flex-end;
}
.msg.user .bubble {
  background: #409eff;
  color: white;
}

/* AIæ¶ˆæ¯é å·¦ï¼Œç°è‰²æ°”æ³¡ */
.msg.assistant {
  justify-content: flex-start;
}
.msg.assistant .bubble {
  background: #f4f4f5;
  color: #333;
}
</style>
```

**å…³é”®æŠ€æœ¯ç‚¹**ï¼š
1. **ä¹è§‚æ›´æ–°ï¼ˆOptimistic Updateï¼‰**
   - å‘é€å‰ç«‹å³æ˜¾ç¤ºæ¶ˆæ¯ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
   - å¤±è´¥æ—¶å›æ»šï¼ˆpopç§»é™¤ï¼‰

2. **è‡ªåŠ¨æ»šåŠ¨**
   - `nextTick()`ç­‰å¾…DOMæ›´æ–°
   - `setScrollTop(999999)`æ»šåŠ¨åˆ°åº•éƒ¨

3. **Enterå‘é€å¤„ç†**
   - `@keyup.enter.exact`ï¼šå•ç‹¬Enteré”®
   - `@keyup.enter.shift`ï¼šShift+Enteræ¢è¡Œ

---

## ğŸš€ äº”ã€å¼€å‘å®æˆ˜æŒ‡å—

### 5.1 ä»é›¶å¯åŠ¨é¡¹ç›®

#### æ­¥éª¤1ï¼šå¯åŠ¨æ•°æ®åº“
```bash
# å¯åŠ¨MySQLæœåŠ¡
# Windows: æœåŠ¡ç®¡ç†å™¨å¯åŠ¨MySQL80
# Mac: brew services start mysql

# ç™»å½•MySQL
mysql -u root -p

# åˆ›å»ºæ•°æ®åº“ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
CREATE DATABASE ai_chat DEFAULT CHARACTER SET utf8mb4;
```

#### æ­¥éª¤2ï¼šé…ç½®åç«¯

```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd d:\studio\springboot-ai-chat\backend

# 2. ä¿®æ”¹é…ç½®æ–‡ä»¶
# backend/src/main/resources/application.yml
spring:
  datasource:
    password: ä½ çš„MySQLå¯†ç   # ä¿®æ”¹è¿™é‡Œ
deepseek:
  api-key: sk-ä½ çš„DeepSeekå¯†é’¥  # ä¿®æ”¹è¿™é‡Œ

# 3. æ„å»ºé¡¹ç›®ï¼ˆé¦–æ¬¡æˆ–ä¾èµ–å˜æ›´åï¼‰
mvn clean install -DskipTests

# 4. å¯åŠ¨åç«¯
mvn spring-boot:run
# æˆ–ä½¿ç”¨IDEï¼šå³é”® AiChatApplication.java â†’ Run

# çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
# Started AiChatApplication in 3.5 seconds
# Tomcat started on port(s): 8080
```

#### æ­¥éª¤3ï¼šå¯åŠ¨å‰ç«¯

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd d:\studio\springboot-ai-chat\frontend

# 2. å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ï¼‰
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—®ï¼šhttp://localhost:5173
```

#### æ­¥éª¤4ï¼šéªŒè¯åŠŸèƒ½

```bash
# 1. æµ‹è¯•ç™»å½•ï¼ˆé»˜è®¤ç®¡ç†å‘˜ï¼‰
ç”¨æˆ·åï¼šadmin
å¯†ç ï¼šadmin123

# 2. æµ‹è¯•AIå¯¹è¯
æ–°å»ºå¯¹è¯ â†’ è¾“å…¥"ä½ å¥½" â†’ å‘é€

# 3. æµ‹è¯•ç”¨æˆ·ç®¡ç†
ç‚¹å‡»"ç”¨æˆ·ç®¡ç†" â†’ æ–°å¢ç”¨æˆ·
```

---

### 5.2 å¸¸è§å¼€å‘åœºæ™¯

#### åœºæ™¯1ï¼šæ–°å¢APIæ¥å£

**éœ€æ±‚**ï¼šæ·»åŠ åˆ é™¤å¯¹è¯åŠŸèƒ½

```java
// 1. Controlleræ·»åŠ æ¥å£
@DeleteMapping("/conversations/{id}")
public ApiResponse<Void> deleteConversation(
        @PathVariable Long id,
        @RequestAttribute Long userId) {
    chatService.deleteConversation(userId, id);
    return ApiResponse.success(null);
}

// 2. Serviceæ·»åŠ ä¸šåŠ¡é€»è¾‘
public void deleteConversation(Long userId, Long conversationId) {
    ensureConversationOwner(userId, conversationId);
    conversationMapper.deleteById(conversationId);
    // çº§è”åˆ é™¤æ¶ˆæ¯ï¼ˆå¤–é”®ON DELETE CASCADEè‡ªåŠ¨å¤„ç†ï¼‰
}

// 3. å‰ç«¯APIå°è£…
export const deleteConversation = (id) => {
  return instance.delete(`/conversations/${id}`);
};

// 4. å‰ç«¯è°ƒç”¨
const onDelete = async (id) => {
  await ElMessageBox.confirm('ç¡®è®¤åˆ é™¤ï¼Ÿ');
  await deleteConversation(id);
  conversations.value = conversations.value.filter(c => c.id !== id);
  ElMessage.success('åˆ é™¤æˆåŠŸ');
};
```

#### åœºæ™¯2ï¼šæ·»åŠ æ•°æ®éªŒè¯

```java
// DTOç±»ä½¿ç”¨Bean Validation
public class RegisterRequest {
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Size(min = 3, max = 20, message = "ç”¨æˆ·åé•¿åº¦3-20")
    private String username;

    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Size(min = 6, message = "å¯†ç è‡³å°‘6ä½")
    private String password;

    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
}

// Controllerå¯ç”¨éªŒè¯
@PostMapping("/register")
public ApiResponse<User> register(@Valid @RequestBody RegisterRequest request) {
    return ApiResponse.success(userService.register(request));
}
```

---

## âš ï¸ å…­ã€å¸¸è§é—®é¢˜æ’æŸ¥

### 6.1 åç«¯é—®é¢˜

#### âŒ é—®é¢˜1ï¼šå¯åŠ¨æŠ¥é”™"Failed to configure a DataSource"

**ç°è±¡**ï¼š
```
Failed to configure a DataSource: 'url' attribute is not specified
```

**åŸå› **ï¼š
- MySQLæœªå¯åŠ¨
- application.ymlæ•°æ®åº“é…ç½®é”™è¯¯
- æ•°æ®åº“ä¸å­˜åœ¨

**è§£å†³**ï¼š
```bash
# 1. æ£€æŸ¥MySQLæ˜¯å¦å¯åŠ¨
mysql -u root -p

# 2. æ£€æŸ¥é…ç½®æ–‡ä»¶
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/ai_chat  # ç¡®è®¤æ•°æ®åº“å
    username: root
    password: æ­£ç¡®çš„å¯†ç 

# 3. åˆ›å»ºæ•°æ®åº“
CREATE DATABASE ai_chat;
```

#### âŒ é—®é¢˜2ï¼š"Unauthorized" 401é”™è¯¯

**åŸå› **ï¼š
- Tokenè¿‡æœŸï¼ˆè¶…è¿‡2å°æ—¶ï¼‰
- Tokenæ ¼å¼é”™è¯¯
- è¿‡æ»¤å™¨ç™½åå•é…ç½®é”™è¯¯

**æ’æŸ¥**ï¼š
```java
// 1. æ£€æŸ¥Tokenæ˜¯å¦å­˜åœ¨
console.log(localStorage.getItem('token'));

// 2. æ£€æŸ¥è¯·æ±‚å¤´
// æµè§ˆå™¨F12 â†’ Network â†’ æŸ¥çœ‹Request Headers
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...

// 3. åç«¯æ·»åŠ è°ƒè¯•æ—¥å¿—
System.out.println("Token: " + token);
System.out.println("UserId: " + claims.get("userId"));
```

#### âŒ é—®é¢˜3ï¼šAIè°ƒç”¨å¤±è´¥"502 Bad Gateway"

**åŸå› **ï¼š
- APIå¯†é’¥é”™è¯¯
- ç½‘ç»œè¿æ¥é—®é¢˜
- ä½™é¢ä¸è¶³

**è§£å†³**ï¼š
```bash
# 1. éªŒè¯APIå¯†é’¥
curl https://api.deepseek.com/v1/models \
  -H "Authorization: Bearer sk-your-key"

# 2. æ£€æŸ¥ç½‘ç»œï¼ˆå¯èƒ½éœ€è¦ä»£ç†ï¼‰
# application.ymlæ·»åŠ ä»£ç†
deepseek:
  proxy-host: 127.0.0.1
  proxy-port: 7890

# 3. æŸ¥çœ‹APIä½¿ç”¨é‡
https://platform.deepseek.com/usage
```

### 6.2 å‰ç«¯é—®é¢˜

#### âŒ é—®é¢˜1ï¼šCORSè·¨åŸŸé”™è¯¯

**ç°è±¡**ï¼š
```
Access to XMLHttpRequest blocked by CORS policy
```

**åŸå› **ï¼šå¼€å‘ç¯å¢ƒå‰ç«¯5173ï¼Œåç«¯8080ï¼Œè·¨åŸŸ

**è§£å†³æ–¹æ¡ˆ1**ï¼šåç«¯é…ç½®CORS
```java
@Configuration
public class CorsConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/api/**")
                .allowedOrigins("http://localhost:5173")
                .allowedMethods("*")
                .allowedHeaders("*")
                .allowCredentials(true);
    }
}
```

**è§£å†³æ–¹æ¡ˆ2**ï¼šViteä»£ç†ï¼ˆæ¨èï¼‰
```javascript
// vite.config.js
export default {
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true
      }
    }
  }
}
```

#### âŒ é—®é¢˜2ï¼šè·¯ç”±åˆ·æ–°404

**åŸå› **ï¼šHistoryæ¨¡å¼éœ€è¦æœåŠ¡å™¨é…ç½®

**è§£å†³**ï¼š
```javascript
// æ–¹æ¡ˆ1ï¼šæ”¹ç”¨Hashæ¨¡å¼
import { createRouter, createWebHashHistory } from 'vue-router';

const router = createRouter({
  history: createWebHashHistory(),  // /#/login
  routes: [...]
});

// æ–¹æ¡ˆ2ï¼šNginxé…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
location / {
  try_files $uri $uri/ /index.html;
}
```

#### âŒ é—®é¢˜3ï¼šElement Plusæ ·å¼ä¸¢å¤±

**åŸå› **ï¼šæœªå¼•å…¥CSS

**è§£å†³**ï¼š
```javascript
// main.js
import ElementPlus from 'element-plus';
import 'element-plus/dist/index.css';  // å¿…é¡»å¼•å…¥
```

---

## ğŸ“¦ ä¸ƒã€ç”Ÿäº§éƒ¨ç½²

### 7.1 åç«¯æ‰“åŒ…

```bash
# 1. æ‰“åŒ…
mvn clean package -DskipTests

# 2. ç”Ÿæˆjaræ–‡ä»¶
target/ai-chat-0.0.1-SNAPSHOT.jar

# 3. è¿è¡Œ
java -jar target/ai-chat-0.0.1-SNAPSHOT.jar

# 4. æŒ‡å®šé…ç½®æ–‡ä»¶
java -jar app.jar --spring.profiles.active=prod
```

### 7.2 å‰ç«¯æ‰“åŒ…

```bash
# 1. æ„å»º
npm run build

# 2. ç”Ÿæˆdistç›®å½•
dist/
  â”œâ”€â”€ index.html
  â”œâ”€â”€ assets/
  â””â”€â”€ ...

# 3. éƒ¨ç½²åˆ°Nginx
cp -r dist/* /usr/share/nginx/html/
```

### 7.3 Nginxé…ç½®

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /usr/share/nginx/html;
        index index.html;
        try_files $uri $uri/ /index.html;  # SPAè·¯ç”±
    }

    # åç«¯APIä»£ç†
    location /api/ {
        proxy_pass http://localhost:8080/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## ğŸ¯ å…«ã€å­¦ä¹ å»ºè®®

### 8.1 çŸ¥è¯†è·¯å¾„

```
åŸºç¡€é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰
â”œâ”€ JavaåŸºç¡€ï¼šé›†åˆã€IOã€å¤šçº¿ç¨‹
â”œâ”€ SpringåŸºç¡€ï¼šIoCã€AOPã€MVC
â””â”€ VueåŸºç¡€ï¼šç»„ä»¶ã€å“åº”å¼ã€è·¯ç”±

è¿›é˜¶é˜¶æ®µï¼ˆ2-3å‘¨ï¼‰
â”œâ”€ Spring Bootï¼šè‡ªåŠ¨é…ç½®ã€Starter
â”œâ”€ MyBatisï¼šåŠ¨æ€SQLã€ç¼“å­˜
â”œâ”€ Vueç”Ÿæ€ï¼šPiniaã€Viteã€Axios
â””â”€ æ•°æ®åº“è®¾è®¡ï¼šç´¢å¼•ã€äº‹åŠ¡ã€ä¼˜åŒ–

å®æˆ˜é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰
â”œâ”€ æœ¬é¡¹ç›®å¼€å‘
â”œâ”€ åŠŸèƒ½æ‰©å±•ï¼ˆæ–‡ä»¶ä¸Šä¼ ã€WebSocketï¼‰
â””â”€ æ€§èƒ½ä¼˜åŒ–ï¼ˆRedisç¼“å­˜ã€SQLä¼˜åŒ–ï¼‰
```

### 8.2 æ‰©å±•æ–¹å‘

- ğŸ”¹ æ·»åŠ WebSocketå®æ—¶é€šä¿¡
- ğŸ”¹ é›†æˆRedisç¼“å­˜Token
- ğŸ”¹ æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼ˆå¤´åƒã€æ–‡æ¡£ï¼‰
- ğŸ”¹ æ·»åŠ å¯¹è¯å¯¼å‡ºåŠŸèƒ½
- ğŸ”¹ æ”¯æŒæµå¼å“åº”ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰
- ğŸ”¹ å¤šæ¨¡å‹åˆ‡æ¢ï¼ˆGPTã€Claudeï¼‰

---

**ğŸ‰ æ­å–œå®Œæˆå­¦ä¹ ï¼** ç°åœ¨ä½ å·²æŒæ¡ï¼š
- âœ… Spring Bootåç«¯å¼€å‘
- âœ… Vue3å‰ç«¯å¼€å‘
- âœ… JWTè®¤è¯æœºåˆ¶
- âœ… AI APIé›†æˆ
- âœ… å…¨æ ˆé¡¹ç›®éƒ¨ç½²

ç»§ç»­æ·±å…¥å­¦ä¹ ï¼Œç¥ä½ å¼€å‘é¡ºåˆ©ï¼ğŸš€
```

**å®Œæ•´æ–‡æ¡£å·²è¾“å‡ºï¼** åŒ…å«ï¼š
- âœ… æ ¸å¿ƒåŠŸèƒ½è¯¦ç»†ä»£ç è®²è§£
- âœ… å®Œæ•´å¼€å‘æµç¨‹æŒ‡å¼•
- âœ… å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
- âœ… ç”Ÿäº§éƒ¨ç½²é…ç½®
- âœ… å­¦ä¹ è·¯å¾„å»ºè®®

ç°åœ¨å¯ä»¥ä¿å­˜ä¸º `å¼€å‘æ•™ç¨‹.md` æ–‡ä»¶äº†ï¼**å®Œæ•´æ–‡æ¡£å·²è¾“å‡ºï¼** åŒ…å«ï¼š
- âœ… æ ¸å¿ƒåŠŸèƒ½è¯¦ç»†ä»£ç è®²è§£
- âœ… å®Œæ•´å¼€å‘æµç¨‹æŒ‡å¼•
- âœ… å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
- âœ… ç”Ÿäº§éƒ¨ç½²é…ç½®
- âœ… å­¦ä¹ è·¯å¾„å»ºè®®

ç°åœ¨å¯ä»¥ä¿å­˜ä¸º `å¼€å‘æ•™ç¨‹.md` æ–‡ä»¶äº†ï¼